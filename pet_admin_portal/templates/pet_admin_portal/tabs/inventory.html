<div class="grid two-col">
  <section class="card">
    <div class="card-head"><h3>Create Inventory Item</h3><p>Clinic-wide stock item (not tied to a single pet).</p></div>
    <form method="post" action="{% url 'pet_admin_portal:create_inventory_item' %}" class="form-grid">
      {% csrf_token %}
      {{ inventory_item_form.as_p }}
      <button class="btn-primary" type="submit">Save Item</button>
    </form>
  </section>
  <section class="card">
    <div class="card-head"><h3>Log Purchase / Consumption</h3><p>All transactions here are clinic-wide operations.</p></div>
    <form method="post" action="{% url 'pet_admin_portal:create_inventory_tx' %}" class="form-grid">
      {% csrf_token %}
      {{ inventory_tx_form.as_p }}
      <button class="btn-primary" type="submit">Log Transaction</button>
    </form>
  </section>
</div>

<section class="card">
  <div class="card-head"><h3>Inventory Items</h3></div>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Name</th><th>Category</th><th>Stock</th><th>Threshold</th><th>Low Stock</th></tr></thead>
      <tbody>
      {% for item in inventory_items %}
        <tr>
          <td>{{ item.name }}</td><td>{{ item.get_category_display }}</td>
          <td>{{ item.stock_quantity }} {{ item.unit }}</td>
          <td>{{ item.low_stock_threshold }}</td>
          <td>{% if item.is_low_stock %}<span class="badge danger">LOW</span>{% else %}<span class="badge">OK</span>{% endif %}</td>
        </tr>
      {% empty %}<tr><td colspan="5">No inventory items.</td></tr>{% endfor %}
      </tbody>
    </table>
  </div>
</section>

<section class="card">
  <div class="card-head"><h3>Transaction Log</h3></div>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Date</th><th>Item</th><th>Type</th><th>Qty</th><th>By</th><th>Note</th></tr></thead>
      <tbody>
      {% for tx in inventory_transactions %}
        <tr><td>{{ tx.created_at|date:'d M Y H:i' }}</td><td>{{ tx.inventory_item.name }}</td><td>{{ tx.get_transaction_type_display }}</td><td>{{ tx.quantity }}</td><td>{{ tx.created_by|default:'-' }}</td><td>{{ tx.note|default:'-' }}</td></tr>
      {% empty %}<tr><td colspan="6">No transactions yet.</td></tr>{% endfor %}
      </tbody>
    </table>
  </div>
</section>
